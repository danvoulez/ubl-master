{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ubl.agency/schemas/audit.ledger.snapshot.request.v1.json",
  "title": "audit/ledger.snapshot.request.v1",
  "type": "object",
  "required": ["@type", "@id", "@ver", "@world", "range"],
  "properties": {
    "@type": { "const": "audit/ledger.snapshot.request.v1" },
    "@id": { "type": "string", "minLength": 1 },
    "@ver": { "type": "string", "minLength": 1 },
    "@world": { "type": "string", "minLength": 1 },
    "components": { "type": "array", "items": { "type": "string" } },
    "range": {
      "type": "object",
      "required": ["start", "end"],
      "properties": {
        "start": { "type": "string", "format": "date-time" },
        "end": { "type": "string", "format": "date-time" }
      }
    },
    "include": {
      "type": "object",
      "properties": {
        "metrics": { "type": "array", "items": { "type": "string" } },
        "histograms": { "type": "array", "items": { "type": "string" } },
        "sketches": { "type": "array", "items": { "type": "string" } },
        "error_counters": { "type": "array", "items": { "type": "string" } }
      }
    },
    "outputs": {
      "type": "array",
      "items": { "enum": ["ndjson", "pdf", "manifest"] }
    },
    "redaction_profile": { "type": "string" },
    "@cap": { "type": "object" }
  }
}
